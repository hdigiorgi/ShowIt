@import helper._
@import com.hdigiorgi.showPhoto.model.post.Post

@(post: Post, images: Seq[String])(implicit request: RequestHeader)

@main("EDIT", css="admin/forms") {
    @admin.uploader()
    @admin.simplemde()
    

    <div id="form-loading">
        <i class="fas fa-spinner fa-pulse"></i>
    </div>

    <div id="form-container" class="container">

        <h2>Edición de publicación</h2>

        @form(CSRF(routes.AdminPostController.imageProcess(post.id.value)), 'id -> "imageProcessForm") { }
        @form(routes.AdminPostController.imageList(post.id.value), 'id -> "imageListForm") { }
        @form(CSRF(routes.AdminPostController.attachmentProcess(post.id.value)), 'id -> "attachmentProcessForm") { }
        @form(routes.AdminPostController.attachmentList(post.id.value), 'id -> "attachmentListForm") { }
        @form(CSRF(routes.AdminPostController.saveTitle(post.id.value)), 'id -> "saveTitleForm") { }
        @form(CSRF(routes.AdminPostController.saveContent(post.id.value)), 'id -> "saveContentForm") { }
        @form(CSRF(routes.AdminPostController.publish(post.id.value)), 'id -> "publishForm") { }
        @form(CSRF(routes.AdminPostController.unpublish(post.id.value)), 'id -> "unpublishForm") { }
        

        <div>

            <div class="form-group">
                <label>Título</label>
                <div id="titleIndications" class="input-indicator"></div>
                <input id="titleInput" name="title" type="text" class="form-control form-control-lg" placeholder="Escribi el titulo"
                       value="@{post.title.value}" autocomplete="off">
            </div>

            <div class="form-group">
                <label>Imagenes</label>
                <div id="image-uploader" class="image-uploader"></div>
            </div>  
    
            <div class="form-group">
                <label>Archivo a vender</label>
                <div id="attachment-uploader" class="attachment-uploader"></div>
            </div>

            <div class="form-group">
                <label>Descripción de la publicación</label>
                <div id="contentIndications" class="input-indicator"></div>
                <textarea class="form-control" id="contentTextArea" rows="5" autocomplete="off">@post.rawContent</textarea>
            </div>

            <div>
                <button id="publicationLoadingButton" class="btn btn-secondary float-right" >
                    <i class="fas fa-spinner fa-pulse"></i>
                </button>
                
                <button id="unpublishButton" class="btn btn-secondary float-right @post.publicationStatus.name" >
                    <i class="fas fa-archive"></i>
                    Despublicar
                </button>
                
                <button id="publishButton" class="btn btn-primary float-right @post.publicationStatus.name"  >
                    <i class="fas fa-globe-americas"></i>
                    Publicar
                </button>
                
                <div class="btn-group float-right more-ops-button">
                    <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a class="dropdown-item" href="#">
                            <i class="fas fa-eye"></i>
                            Ver publicacion
                        </a>
                        <a class="dropdown-item" href="#" data-toggle="modal" data-target="#deleteModalConfirmation">
                            <i class="far fa-trash-alt"></i>
                            Borrar
                        </a>
                    </div>
                </div>
            </div>
            <div id="publishIndications" class="float-right"></div>            

        </div>  @* end form *@


        <!-- Delete Modal -->
        <div class="modal fade" id="deleteModalConfirmation" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Confirmacion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Estas seguro que queres eliminar la publicacion?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger">Borrar</button>
                </div>
                </div>
            </div>
        </div>
        <!-- Delete Modal -->



    </div>

} { 
    <script src="@routes.Assets.versioned("javascripts/adminPost.js")" type="text/javascript"></script>
}